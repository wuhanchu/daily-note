import numpy as np #line:2
import re #line:3
import sys #line:4
import os #line:5
def num_to_char (OOO0O000O00O000OO ):#line:8
    ""#line:9
    OOO0O000O00O000OO =str (OOO0O000O00O000OO )#line:10
    OOO0O000O00O000OO =OOO0O000O00O000OO .replace ("1_","一")#line:11
    OOO0OOO0OOO000O00 =""#line:12
    O0OOOOOOOO0OO0O00 ={"0":u"零","1":u"幺","2":u"二","3":u"三","4":u"四","5":u"五","6":u"六","7":u"七","8":u"八","9":u"九"}#line:14
    OO0O000OOOOOO0OO0 =list (OOO0O000O00O000OO )#line:15
    O00OOOO0O0O0O0O00 =[]#line:17
    for OO0OO0O0OOO0OO000 in OO0O000OOOOOO0OO0 :#line:18
        try :#line:20
            O0OO0OOOO0O0OO0O0 =O0OOOOOOOO0OO0O00 [OO0OO0O0OOO0OO000 ]#line:21
        except :#line:22
            O0OO0OOOO0O0OO0O0 =OO0OO0O0OOO0OO000 #line:23
        O00OOOO0O0O0O0O00 .append (O0OO0OOOO0O0OO0O0 )#line:24
    OOO0OOO0OOO000O00 ="".join (O00OOOO0O0O0O0O00 )#line:25
    return OOO0OOO0OOO000O00 #line:27
def init (OOO0OO0O0O0OO0OOO ,O000O00O00O00O0O0 ):#line:30
    OO00OO00O0O0OOO00 =np .empty ((len (OOO0OO0O0O0OO0OOO )+1 ,len (O000O00O00O00O0O0 )+1 ))#line:31
    OO00OO00O0O0OOO00 [:]=np .inf #line:32
    OO00OO00O0O0OOO00 [0 ]=np .arange (OO00OO00O0O0OOO00 .shape [1 ])#line:34
    O0O00OO00OO0OOO00 =0 #line:36
    for O00O00OOO000O0000 in OO00OO00O0O0OOO00 :#line:37
        O00O00OOO000O0000 [0 ]=O0O00OO00OO0OOO00 #line:38
        O0O00OO00OO0OOO00 +=1 #line:39
    return OO00OO00O0O0OOO00 #line:40
def med_classic_gui (OO0OOOO0O000O00O0 ,OO00O0O0OO000O0O0 ):#line:43
    O0O0OOOOOOO00000O =init (OO0OOOO0O000O00O0 ,OO00O0O0OO000O0O0 )#line:45
    for O0O0OO00000OOOO00 in range (1 ,O0O0OOOOOOO00000O .shape [0 ]):#line:46
        for O00O000O0O000OOOO in range (1 ,O0O0OOOOOOO00000O .shape [1 ]):#line:47
            O0OO0O0OOOO00OOO0 =O0O0OOOOOOO00000O [O0O0OO00000OOOO00 -1 ,O00O000O0O000OOOO ]+1 #line:50
            O00OOO00OOOO000O0 =O0O0OOOOOOO00000O [O0O0OO00000OOOO00 ,O00O000O0O000OOOO -1 ]+1 #line:53
            if OO0OOOO0O000O00O0 [O0O0OO00000OOOO00 -1 ]==OO00O0O0OO000O0O0 [O00O000O0O000OOOO -1 ]:#line:56
                OO00O0OO000O0OOO0 =O0O0OOOOOOO00000O [O0O0OO00000OOOO00 -1 ,O00O000O0O000OOOO -1 ]#line:58
            else :#line:59
                OO00O0OO000O0OOO0 =O0O0OOOOOOO00000O [O0O0OO00000OOOO00 -1 ,O00O000O0O000OOOO -1 ]+1 #line:61
            O0O0OOOOOOO00000O [O0O0OO00000OOOO00 ][O00O000O0O000OOOO ]=min (O0OO0O0OOOO00OOO0 ,O00OOO00OOOO000O0 ,OO00O0OO000O0OOO0 )#line:64
    O00OO0000000O0OO0 =0 #line:67
    OO0O00OOOOOOO0O0O =np .c_ [[O00OO0000000O0OO0 ]*len (O0O0OOOOOOO00000O [:]),O0O0OOOOOOO00000O ]#line:68
    OOOOO0O00000O0O00 =np .r_ [[[O00OO0000000O0OO0 ]*len (OO0O00OOOOOOO0O0O [1 ,:])],OO0O00OOOOOOO0O0O ]#line:69
    OO00O000O0OO00O0O =[[' 'for O0O0O0OOOO0000000 in range (len (OO00O0O0OO000O0O0 )+2 )]for O000O0OO0O0000OOO in range (len (OO0OOOO0O000O00O0 )+2 )]#line:71
    OO00O000O0OO00O0O [1 ][1 ]=0 #line:72
    for O0O0OO00000OOOO00 in range (2 ,len (OO0OOOO0O000O00O0 )+2 ):#line:74
        OO00O000O0OO00O0O [O0O0OO00000OOOO00 ][0 ]=OO0OOOO0O000O00O0 [O0O0OO00000OOOO00 -2 ]#line:75
    for O00O000O0O000OOOO in range (2 ,len (OO00O0O0OO000O0O0 )+2 ):#line:76
        OO00O000O0OO00O0O [0 ][O00O000O0O000OOOO ]=OO00O0O0OO000O0O0 [O00O000O0O000OOOO -2 ]#line:77
    for O0O0OO00000OOOO00 in range (2 ,len (OO0OOOO0O000O00O0 )+2 ):#line:79
        OO00O000O0OO00O0O [O0O0OO00000OOOO00 ][1 ]='|'#line:80
    for O00O000O0O000OOOO in range (2 ,len (OO00O0O0OO000O0O0 )+2 ):#line:82
        OO00O000O0OO00O0O [1 ][O00O000O0O000OOOO ]='-'#line:83
    for O0O0OO00000OOOO00 in range (2 ,len (OO0OOOO0O000O00O0 )+2 ):#line:85
        for O00O000O0O000OOOO in range (2 ,len (OO00O0O0OO000O0O0 )+2 ):#line:86
            O0O0OOOOO0000OO0O =OOOOO0O00000O0O00 [O0O0OO00000OOOO00 -1 ][O00O000O0O000OOOO ]+1 #line:87
            OOOO0OO00O0O0O00O =OOOOO0O00000O0O00 [O0O0OO00000OOOO00 ][O00O000O0O000OOOO -1 ]+1 #line:88
            if OO0OOOO0O000O00O0 [O0O0OO00000OOOO00 -2 ]==OO00O0O0OO000O0O0 [O00O000O0O000OOOO -2 ]:#line:89
                O0OOO00O000O0O000 =OOOOO0O00000O0O00 [O0O0OO00000OOOO00 -1 ][O00O000O0O000OOOO -1 ]#line:90
            else :#line:91
                O0OOO00O000O0O000 =OOOOO0O00000O0O00 [O0O0OO00000OOOO00 -1 ][O00O000O0O000OOOO -1 ]+1 #line:92
            OOO00O00OOOO00OOO =min (O0OOO00O000O0O000 ,O0O0OOOOO0000OO0O ,OOOO0OO00O0O0O00O )#line:94
            OOOOO0O00000O0O00 [O0O0OO00000OOOO00 ][O00O000O0O000OOOO ]=OOO00O00OOOO00OOO #line:95
            if OOO00O00OOOO00OOO ==O0OOO00O000O0O000 :#line:97
                OO00O000O0OO00O0O [O0O0OO00000OOOO00 ][O00O000O0O000OOOO ]='bn'#line:98
            elif OOO00O00OOOO00OOO ==O0O0OOOOO0000OO0O :#line:99
                OO00O000O0OO00O0O [O0O0OO00000OOOO00 ][O00O000O0O000OOOO ]='|'#line:100
            else :#line:101
                OO00O000O0OO00O0O [O0O0OO00000OOOO00 ][O00O000O0O000OOOO ]='-'#line:102
    OO0O0O00O00O000O0 =""#line:104
    O00OO000O0OO0OO0O =""#line:105
    OOO0O0O0OO0O0OOOO =""#line:106
    OO0OOO00OOO0O0OO0 =''#line:107
    O0O0OO00000OOOO00 =len (OO0OOOO0O000O00O0 )+1 #line:108
    O00O000O0O000OOOO =len (OO00O0O0OO000O0O0 )+1 #line:109
    while not (O0O0OO00000OOOO00 ==1 and O00O000O0O000OOOO ==1 ):#line:110
        OOOO0OOOO0OO0O0O0 =OO00O000O0OO00O0O [O0O0OO00000OOOO00 ][O00O000O0O000OOOO ]#line:111
        if OOOO0OOOO0OO0O0O0 =='|':#line:112
            OO0O0O00O00O000O0 +=OO0OOOO0O000O00O0 [O0O0OO00000OOOO00 -2 ]+' '#line:113
            O00OO000O0OO0OO0O +='**'+' '#line:114
            OOO0O0O0OO0O0OOOO +=' '+'  '#line:115
            OO0OOO00OOO0O0OO0 +='D'+'  '#line:116
            O0O0OO00000OOOO00 =O0O0OO00000OOOO00 -1 #line:117
        elif OOOO0OOOO0OO0O0O0 =='bn':#line:118
            OO0O0O00O00O000O0 +=OO0OOOO0O000O00O0 [O0O0OO00000OOOO00 -2 ]+' '#line:119
            O00OO000O0OO0OO0O +=OO00O0O0OO000O0O0 [O00O000O0O000OOOO -2 ]+' '#line:120
            if OO0OOOO0O000O00O0 [O0O0OO00000OOOO00 -2 ]==OO00O0O0OO000O0O0 [O00O000O0O000OOOO -2 ]:#line:121
                OOO0O0O0OO0O0OOOO +='|'+'  '#line:122
                OO0OOO00OOO0O0OO0 +=' '+'  '#line:123
            else :#line:124
                OOO0O0O0OO0O0OOOO +=' '+'  '#line:125
                OO0OOO00OOO0O0OO0 +='S'+'  '#line:126
            O0O0OO00000OOOO00 =O0O0OO00000OOOO00 -1 #line:127
            O00O000O0O000OOOO =O00O000O0O000OOOO -1 #line:128
        else :#line:129
            OO0O0O00O00O000O0 +='**'+' '#line:130
            O00OO000O0OO0OO0O +=OO00O0O0OO000O0O0 [O00O000O0O000OOOO -2 ]+' '#line:131
            OOO0O0O0OO0O0OOOO +=' '+'  '#line:132
            OO0OOO00OOO0O0OO0 +='I'+'  '#line:133
            O00O000O0O000OOOO =O00O000O0O000OOOO -1 #line:134
    print (" ")#line:144
    OO0OOO00OOO0O0OO0 ,O0O0OOOOOOO00000O ,OO0OOOO0O000O00O0 ,OOO0O0O0OO0O0OOOO ,OO00O0O0OO000O0O0 =OO0OOO00OOO0O0OO0 [::-1 ],O0O0OOOOOOO00000O [O0O0OOOOOOO00000O .shape [0 ]-1 ][O0O0OOOOOOO00000O .shape [1 ]-1 ],OO0O0O00O00O000O0 [::-1 ],OOO0O0O0OO0O0OOOO [::-1 ],O00OO000O0OO0OO0O [::-1 ]#line:149
    OO0000OOO00O0OOOO =len (OO0OOOO0O000O00O0 .replace (" ",'').replace ("**",'*'))#line:151
    OOOO000OOO00OO0O0 =OO0OOO00OOO0O0OO0 .count ('I')/OO0000OOO00O0OOOO #line:152
    OO00OO00000O0O0OO =OO0OOO00OOO0O0OO0 .count ('D')/OO0000OOO00O0OOOO #line:153
    O00OOO000OOO000OO =OO0OOO00OOO0O0OO0 .count ('S')/OO0000OOO00O0OOOO #line:154
    return OO0OOO00OOO0O0OO0 ,O0O0OOOOOOO00000O ,OO0OOOO0O000O00O0 ,OOO0O0O0OO0O0OOOO ,OO00O0O0OO000O0O0 ,OOOO000OOO00OO0O0 ,OO00OO00000O0O0OO ,O00OOO000OOO000OO #line:156
def batch_row_classice (OOOO0OO0OO0OO0O0O ,O0OO0000OOOOO00O0 ):#line:160
    O0O0OOOO00OO0O00O =0 #line:161
    OO0OOO0OOOOO0OO0O =0 #line:162
    with open (OOOO0OO0OO0OO0O0O ,'r',encoding ='UTF-8')as O0000O0O0OO0OO0O0 ,open (O0OO0000OOOOO00O0 ,'r',encoding ='UTF-8')as O00O00OO00OOO0O00 :#line:166
        OO0000O00OO00OOO0 =O0000O0O0OO0OO0O0 .readlines ()#line:167
        OO0OO0OO00O0O000O =O00O00OO00OOO0O00 .readlines ()#line:168
        for OO0000OO0OOO0OOOO in range (len (OO0000O00OO00OOO0 )):#line:170
            O00O0O0000000O000 =re .sub ('[,.，。‘’“” \' \"  \n?!？！]','',OO0000O00OO00OOO0 [OO0000OO0OOO0OOOO ])#line:172
            O00000OOO00000OO0 =re .sub ('[,.，。‘’“” \' \"  \n?!？！]','',OO0OO0OO00O0O000O [OO0000OO0OOO0OOOO ])#line:173
            O00O0O0000000O000 =num_to_char (O00O0O0000000O000 )#line:174
            O00000OOO00000OO0 =num_to_char (O00000OOO00000OO0 )#line:175
            OO0O00O0OO00000O0 ,OOOOOOO0O00O00OO0 ,OOOOO0000O0OO00O0 ,OOOO00O00OO0OOOOO ,OOO0OOO0OO00OO0OO ,O0OO0O0OOOO00000O ,OO000OOO000O00000 ,OOOOO0O0OOOOOO0OO =med_classic_gui (O00O0O0000000O000 ,O00000OOO00000OO0 )#line:178
            OO0O00O000OO0OO00 =1 -(OOOOOOO0O00O00OO0 /len (OOOOO0000O0OO00O0 .replace (" ",'')))#line:179
            O0O0OOOO00OO0O00O =O0O0OOOO00OO0O00O +len (O00O0O0000000O000 )#line:181
            OO0OOO0OOOOO0OO0O =OO0OOO0OOOOO0OO0O +OO0O00O000OO0OO00 *len (O00O0O0000000O000 )#line:182
            print ({"accuracy":OO0O00O000OO0OO00 ,"ref":O00O0O0000000O000 ,"hyp":O00000OOO00000OO0 ,"op":OOOO00O00OO0OOOOO ,"op2":OO0O00O0OO00000O0 ,"s1":OOOOO0000O0OO00O0 ,"s2":OOO0OOO0OO00OO0OO ,"I_COUNT_PCT":O0OO0O0OOOO00000O ,"D_COUNT_PCT":OO000OOO000O00000 ,"S_COUNT_PCT":OOOOO0O0OOOOOO0OO })#line:186
    print ("总字数:%s ,平均准确率：%s"%(O0O0OOOO00OO0O00O ,OO0OOO0OOOOO0OO0O /O0O0OOOO00OO0O00O ))#line:189
def enum_path_files (O00O00OO0OO0OO00O ):#line:194
    OOOOOO00000000OOO =len (O00O00OO0OO0OO00O )#line:195
    OO000OOO0OO00O0OO =[]#line:196
    if not os .path .isdir (O00O00OO0OO0OO00O ):#line:197
        print ('Error:"',O00O00OO0OO0OO00O ,'" is not a directory or does not exist.')#line:198
        return #line:199
    O00O0O00OO00OOOO0 =os .walk (O00O00OO0OO0OO00O )#line:200
    for OO0OO0O000000000O ,O0O000000OO00O0OO ,O0O0000000000O00O in O00O0O00OO00OOOO0 :#line:201
        for O000O0O0O00O0000O in O0O0000000000O00O :#line:202
            OO000OOO0OO00O0OO .append (os .path .join (OO0OO0O000000000O ,O000O0O0O00O0000O )[OOOOOO00000000OOO +1 :])#line:203
    return OO000OOO0OO00O0OO #line:204
def batch_file_classice (O0OO0O00OO00OO0O0 ,O00OOO0O0O0000OO0 ):#line:209
    O00000O0OO0OOO0O0 =0 #line:210
    O000OOO0OOO0000O0 =0 #line:211
    OOOO0OOOOO0O0O0OO =enum_path_files (O0OO0O00OO00OO0O0 )#line:213
    for OOO0OOO00000OOOOO in OOOO0OOOOO0O0O0OO :#line:214
        print (OOO0OOO00000OOOOO )#line:215
        O0O00000O000O0000 =open (os .path .join (O0OO0O00OO00OO0O0 ,OOO0OOO00000OOOOO ),'r',encoding ='UTF-8').read ()#line:217
        OO00OOO00O00OOOO0 =open (os .path .join (O00OOO0O0O0000OO0 ,OOO0OOO00000OOOOO ),'r',encoding ='UTF-8').read ()#line:219
        O0O00000O000O0000 =re .sub ('[,.，。‘’“” \' \"  \n?!？！]','',O0O00000O000O0000 )#line:221
        OO00OOO00O00OOOO0 =re .sub ('[,.，。‘’“” \' \"  \n?!？！]','',OO00OOO00O00OOOO0 )#line:222
        O0O00000O000O0000 =num_to_char (O0O00000O000O0000 )#line:223
        OO00OOO00O00OOOO0 =num_to_char (OO00OOO00O00OOOO0 )#line:224
        OO00O00O0O0OO00O0 ,O000OO0O0OOOO00O0 ,O0O0OO0OO0O0OO00O ,O00O0OO0OOOO0O000 ,OO0OOO00OOO0O0O00 ,O0O0OOOO0OO0OOO0O ,O0O0OO00O0O000OOO ,OOOO0OOO0O0O0OOO0 =med_classic_gui (O0O00000O000O0000 ,OO00OOO00O00OOOO0 )#line:227
        OO000000OOO00OOOO =1 -(O000OO0O0OOOO00O0 /len (O0O0OO0OO0O0OO00O .replace (" ",'')))#line:228
        O00000O0OO0OOO0O0 =O00000O0OO0OOO0O0 +len (O0O00000O000O0000 )#line:230
        O000OOO0OOO0000O0 =O000OOO0OOO0000O0 +OO000000OOO00OOOO *len (O0O00000O000O0000 )#line:231
        print ({"accuracy":OO000000OOO00OOOO ,"ref":O0O00000O000O0000 ,"hyp":OO00OOO00O00OOOO0 ,"op":O00O0OO0OOOO0O000 ,"op2":OO00O00O0O0OO00O0 ,"s1":O0O0OO0OO0O0OO00O ,"s2":OO0OOO00OOO0O0O00 ,"I_COUNT_PCT":O0O0OOOO0OO0OOO0O ,"D_COUNT_PCT":O0O0OO00O0O000OOO ,"S_COUNT_PCT":OOOO0OOO0O0O0OOO0 })#line:235
    print ("总字数:%s ,平均准确率：%s"%(O00000O0OO0OOO0O0 ,O000OOO0OOO0000O0 /O00000O0OO0OOO0O0 ))#line:238
if __name__ =="__main__":#line:241
    print (num_to_char ("读取文件：标注文本.txt  比对文本.txt"))#line:243
    if len (sys .argv )<2 :#line:245
        print ("需要2个参数!")#line:246
    else :#line:247
        ref_file_path =sys .argv [1 ]#line:248
        hyp_file_path =sys .argv [2 ]#line:249
        print ("param: %s , %s"%(ref_file_path ,hyp_file_path ))#line:256
        if os .path .isdir (ref_file_path ):#line:258
            batch_file_classice (ref_file_path ,hyp_file_path )#line:259
        elif os .path .isfile (ref_file_path ):#line:260
            batch_row_classice (ref_file_path ,hyp_file_path )#line:261
        else :#line:262
            print ("参数错误，文件或目录不存在")#line:263

